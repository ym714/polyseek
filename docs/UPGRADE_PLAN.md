# Polyseek ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ãƒ—ãƒ©ãƒ³

## ğŸ¯ å„ªå…ˆåº¦åˆ¥ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰é …ç›®

### ğŸ”¥ é«˜å„ªå…ˆåº¦ï¼ˆå³åº§ã«ä¾¡å€¤ã‚’æä¾›ï¼‰

#### 1. X/Twitterçµ±åˆ
- **ç¾çŠ¶**: News APIã®ã¿
- **æ”¹å–„**: X API v2ã‚’ä½¿ç”¨ã—ã¦ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ã‚·ã‚°ãƒŠãƒ«ã‚’å–å¾—
- **å®Ÿè£…**: `signals_client.py`ã«`TwitterSignalProvider`ã‚’è¿½åŠ 
- **ä¾¡å€¤**: ã‚ˆã‚Šãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãªå¸‚å ´ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã®æŠŠæ¡

#### 2. Redditçµ±åˆ
- **ç¾çŠ¶**: æœªå®Ÿè£…
- **æ”¹å–„**: Reddit APIã‚’ä½¿ç”¨ã—ã¦é–¢é€£ã‚¹ãƒ¬ãƒƒãƒ‰ã¨ã‚³ãƒ¡ãƒ³ãƒˆã‚’å–å¾—
- **å®Ÿè£…**: `signals_client.py`ã«`RedditSignalProvider`ã‚’è¿½åŠ 
- **ä¾¡å€¤**: ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®è­°è«–ã¨ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã®åˆ†æ

#### 3. ã‚³ãƒ¡ãƒ³ãƒˆåˆ†æã®å¼·åŒ–
- **ç¾çŠ¶**: åŸºæœ¬çš„ãªã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã®ã¿
- **æ”¹å–„**: 
  - è¨€èªåˆ¤å®šã¨ç¿»è¨³ï¼ˆ`langdetect`, `deep-translator`ï¼‰
  - ã‚¹ãƒ‘ãƒ /æ¯’æ€§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
  - æ„Ÿæƒ…åˆ†æã®æ”¹å–„
- **å®Ÿè£…**: `scrape_context.py`ã‚’æ‹¡å¼µ
- **ä¾¡å€¤**: ã‚ˆã‚Šæ­£ç¢ºãªã‚³ãƒ¡ãƒ³ãƒˆåˆ†æ

#### 4. Deepãƒ¢ãƒ¼ãƒ‰ã®å®Ÿè£…
- **ç¾çŠ¶**: Quickãƒ¢ãƒ¼ãƒ‰ã®ã¿å®Ÿè£…æ¸ˆã¿
- **æ”¹å–„**: Plannerâ†’Criticâ†’Follow-upâ†’Finalã®4ã‚¹ãƒ†ãƒƒãƒ—åˆ†æ
- **å®Ÿè£…**: `analysis_agent.py`ã‚’æ‹¡å¼µ
- **ä¾¡å€¤**: ã‚ˆã‚Šæ·±ã„åˆ†æã¨ç²¾åº¦å‘ä¸Š

#### 5. ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½
- **ç¾çŠ¶**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—
- **æ”¹å–„**: 
  - ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆETagå¯¾å¿œï¼‰
  - ãƒ‹ãƒ¥ãƒ¼ã‚¹æ¤œç´¢çµæœã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  - Redisã¾ãŸã¯ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥
- **å®Ÿè£…**: æ–°ã—ã„`cache.py`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
- **ä¾¡å€¤**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã¨APIã‚³ã‚¹ãƒˆå‰Šæ¸›

### âš¡ ä¸­å„ªå…ˆåº¦ï¼ˆæ©Ÿèƒ½æ€§å‘ä¸Šï¼‰

#### 6. ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ãƒ­ã‚°
- **ç¾çŠ¶**: åŸºæœ¬çš„ãªãƒ­ã‚°ã®ã¿
- **æ”¹å–„**:
  - å‡¦ç†æ™‚é–“ã®è¨ˆæ¸¬
  - APIå‘¼ã³å‡ºã—å›æ•°ã¨æˆåŠŸç‡
  - LLMãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ã®è¿½è·¡
  - ã‚¨ãƒ©ãƒ¼ç‡ã®ç›£è¦–
- **å®Ÿè£…**: `metrics.py`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ 
- **ä¾¡å€¤**: é‹ç”¨ç›£è¦–ã¨æœ€é©åŒ–

#### 7. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–
- **ç¾çŠ¶**: åŸºæœ¬çš„ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **æ”¹å–„**:
  - è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ï¼ˆæŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ï¼‰
  - ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼
  - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **å®Ÿè£…**: `error_handler.py`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ 
- **ä¾¡å€¤**: ä¿¡é ¼æ€§ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å‘ä¸Š

#### 8. ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã®æ”¹å–„
- **ç¾çŠ¶**: åŸºæœ¬çš„ãªä¿¡é ¼åº¦è¨ˆç®—
- **æ”¹å–„**:
  - ã‚½ãƒ¼ã‚¹ã®ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢
  - æ™‚ç³»åˆ—ã«ã‚ˆã‚‹é‡ã¿ä»˜ã‘
  - ãƒ™ã‚¤ã‚ºæ›´æ–°ã®æ”¹å–„
- **å®Ÿè£…**: `analysis_agent.py`ã‚’æ‹¡å¼µ
- **ä¾¡å€¤**: ã‚ˆã‚Šæ­£ç¢ºãªä¿¡é ¼åº¦è©•ä¾¡

#### 9. ä¸¦åˆ—å‡¦ç†ã®æœ€é©åŒ–
- **ç¾çŠ¶**: åŸºæœ¬çš„ãªä¸¦åˆ—å‡¦ç†
- **æ”¹å–„**:
  - ã‚ˆã‚ŠåŠ¹ç‡çš„ãªä¸¦åˆ—å®Ÿè¡Œ
  - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆç®¡ç†ã®æ”¹å–„
  - ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ã®æœ€é©åŒ–
- **å®Ÿè£…**: `main.py`ã‚’æ”¹å–„
- **ä¾¡å€¤**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š

### ğŸš€ ä½å„ªå…ˆåº¦ï¼ˆå°†æ¥ã®æ‹¡å¼µï¼‰

#### 10. REST APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- **ç¾çŠ¶**: CLIã®ã¿
- **æ”¹å–„**: FastAPIã‚’ä½¿ç”¨ã—ãŸREST API
- **å®Ÿè£…**: `api.py`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ 
- **ä¾¡å€¤**: ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã®åˆ©ç”¨

#### 11. WebSocketã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°
- **ç¾çŠ¶**: ä¸€æ‹¬ãƒ¬ã‚¹ãƒãƒ³ã‚¹
- **æ”¹å–„**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®åˆ†æé€²æ—ã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°
- **å®Ÿè£…**: WebSocketå¯¾å¿œ
- **ä¾¡å€¤**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å‘ä¸Š

#### 12. éå»ãƒãƒ¼ã‚±ãƒƒãƒˆã¨ã®æ¯”è¼ƒ
- **ç¾çŠ¶**: å˜ä¸€ãƒãƒ¼ã‚±ãƒƒãƒˆåˆ†æã®ã¿
- **æ”¹å–„**: é¡ä¼¼ãƒãƒ¼ã‚±ãƒƒãƒˆã¨ã®æ¯”è¼ƒåˆ†æ
- **å®Ÿè£…**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨æ¯”è¼ƒãƒ­ã‚¸ãƒƒã‚¯
- **ä¾¡å€¤**: ã‚ˆã‚Šæ–‡è„ˆã®ã‚ã‚‹åˆ†æ

#### 13. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜
- **ç¾çŠ¶**: ä¸€æ™‚çš„ãªåˆ†æã®ã¿
- **æ”¹å–„**: åˆ†æçµæœã®æ°¸ç¶šåŒ–
- **å®Ÿè£…**: SQLiteã¾ãŸã¯PostgreSQL
- **ä¾¡å€¤**: å±¥æ­´è¿½è·¡ã¨å­¦ç¿’

#### 14. Web UI
- **ç¾çŠ¶**: CLIã®ã¿
- **æ”¹å–„**: Gradioã¾ãŸã¯Streamlitã‚’ä½¿ç”¨ã—ãŸWebã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- **å®Ÿè£…**: `web_ui.py`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
- **ä¾¡å€¤**: ã‚ˆã‚Šä½¿ã„ã‚„ã™ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

## ğŸ“‹ å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: ã‚³ã‚¢æ©Ÿèƒ½å¼·åŒ–ï¼ˆ1-2é€±é–“ï¼‰
1. X/Twitterçµ±åˆ
2. Redditçµ±åˆ
3. ã‚³ãƒ¡ãƒ³ãƒˆåˆ†æã®å¼·åŒ–
4. ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½

### Phase 2: åˆ†æå“è³ªå‘ä¸Šï¼ˆ1-2é€±é–“ï¼‰
5. Deepãƒ¢ãƒ¼ãƒ‰ã®å®Ÿè£…
6. ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã®æ”¹å–„
7. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–

### Phase 3: é‹ç”¨æ”¹å–„ï¼ˆ1é€±é–“ï¼‰
8. ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ãƒ­ã‚°
9. ä¸¦åˆ—å‡¦ç†ã®æœ€é©åŒ–

### Phase 4: æ‹¡å¼µæ©Ÿèƒ½ï¼ˆå°†æ¥ï¼‰
10-14. REST APIã€WebSocketã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€Web UI

## ğŸ› ï¸ å®Ÿè£…ä¾‹

### X/Twitterçµ±åˆã®å®Ÿè£…ä¾‹

```python
# signals_client.py ã«è¿½åŠ 
class TwitterSignalProvider:
    def __init__(self, bearer_token: Optional[str]):
        self.bearer_token = bearer_token
        self.api_base = "https://api.twitter.com/2"
    
    @property
    def available(self) -> bool:
        return bool(self.bearer_token)
    
    async def search(self, query: str) -> List[SignalRecord]:
        if not self.available:
            return []
        
        # Twitter API v2ã‚’ä½¿ç”¨
        # å®Ÿè£…...
```

### Deepãƒ¢ãƒ¼ãƒ‰ã®å®Ÿè£…ä¾‹

```python
# analysis_agent.py ã«è¿½åŠ 
async def run_deep_analysis(request: AnalysisRequest, settings: Settings) -> Dict:
    # Step 1: Planner - åˆ†æè¨ˆç”»ã‚’ç«‹ã¦ã‚‹
    plan = await _create_analysis_plan(request, settings)
    
    # Step 2: Critic - è¨ˆç”»ã‚’æ‰¹åˆ¤çš„ã«æ¤œè¨¼
    gaps = await _identify_gaps(plan, request, settings)
    
    # Step 3: Follow-up - ã‚®ãƒ£ãƒƒãƒ—ã‚’åŸ‹ã‚ã‚‹è¿½åŠ èª¿æŸ»
    if gaps:
        additional_data = await _gather_additional_data(gaps, settings)
        request = _merge_additional_data(request, additional_data)
    
    # Step 4: Final - æœ€çµ‚åˆ†æ
    return await _final_analysis(request, settings)
```

## ğŸ“Š æˆåŠŸæŒ‡æ¨™

- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: Quickãƒ¢ãƒ¼ãƒ‰ < 30ç§’ã€Deepãƒ¢ãƒ¼ãƒ‰ < 120ç§’
- **ç²¾åº¦**: éå»ãƒãƒ¼ã‚±ãƒƒãƒˆã§ã®äºˆæ¸¬ç²¾åº¦å‘ä¸Š
- **ä¿¡é ¼æ€§**: ã‚¨ãƒ©ãƒ¼ç‡ < 5%
- **ã‚«ãƒãƒ¬ãƒƒã‚¸**: ã‚½ãƒ¼ã‚¹æ•° > 10ä»¶/åˆ†æ
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦**: åˆ†æå“è³ªã®å‘ä¸Š

## ğŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è¿½åŠ 

- **Twitter API**: `tweepy` ã¾ãŸã¯ `twitter-api-v2`
- **Reddit API**: `praw`
- **è¨€èªåˆ¤å®š**: `langdetect`
- **ç¿»è¨³**: `deep-translator`
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: `redis` ã¾ãŸã¯ `cachetools`
- **ãƒ¡ãƒˆãƒªã‚¯ã‚¹**: `prometheus-client`
- **API**: `fastapi`
- **Web UI**: `gradio` ã¾ãŸã¯ `streamlit`

